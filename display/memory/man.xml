<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE refentry PUBLIC
  "-//OASIS//DTD DocBook XML V4.1.2//EN"
  "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd">
<refentry id="ref-display-memory">

<refmeta>
    <refentrytitle>display-memory</refentrytitle>
    <manvolnum>7</manvolnum>
    <refmiscinfo>GGI</refmiscinfo>
</refmeta>

<refnamediv>
    <refname id="display-memory">display-memory</refname>
    <refpurpose>Display on buffer in main memory</refpurpose>
</refnamediv>

<refsynopsisdiv>
<cmdsynopsis>

    <command>display-memory</command>
    <arg choice="plain">:</arg>
    <arg><option>-input</option></arg>
    <arg><option>-noblank</option></arg>
    <arg><option>-physz=<replaceable>sizex</replaceable>,<replaceable>sizey</replaceable><replaceable>dpi</replaceable></option></arg>
    <arg><option>-pixfmt=<replaceable>format_string</replaceable></option></arg>
    <arg><option>-layout=<replaceable>fstride</replaceable>[plb<replaceable>lstride</replaceable>|plan<replaceable>pstride</replaceable>,<replaceable>plstride</replaceable>]</option></arg>
    <group>
        <arg>shmid:<replaceable>sid</replaceable></arg>
	<arg>keyfile:<replaceable>size</replaceable>:<replaceable>id</replaceable>:<replaceable>fname</replaceable></arg>
	<arg>pointer</arg>
    </group>

</cmdsynopsis>
</refsynopsisdiv>

<refsect1><title>Description</title>

<para>
    Emulates a linear framebuffer in main memory. The framebuffer can be a
    shared memory segment, an area specified by the application, or an area
    allocated by <systemitem>display-memory</systemitem> itself.
</para>

</refsect1>

<refsect1><title>Options</title>

    <variablelist>

    <varlistentry>
    <term><replaceable>-input</replaceable></term>
    <listitem><para>
    If the <option>-input</option> option is set, an input buffer of
    <symbol>INPBUFSIZE</symbol>
    (default is 8192 bytes) as #define'd in <filename>ggi/display/memory.h</filename>
    is allocated at the start of the requested memory area.
    </para>
    <para>
    When running on shared memory, this option enables you to to give input
    (using <xref linkend="giiEventSend"/>) to other processes sharing
    that segment. This technique is demonstrated in <xref
    linkend="cube3d"/> and can be used for things like GGI multiplexers.
    </para></listitem>
    </varlistentry>

    <varlistentry>
    <term><replaceable>-noblank</replaceable></term>
    <listitem><para>
    If the <option>-noblank</option> option is set, the framebuffer will
    not be filled with solid black when the mode of the visual is set.  This
    is useful for preserving data from other sources when using a preallocated
    area of memory as a framebuffer.
    </para></listitem>
    </varlistentry>

    <varlistentry>
    <term><option>-physz=<replaceable>sizex</replaceable>,<replaceable>sizey</replaceable><replaceable>dpi</replaceable></option></term>
    <listitem><para>
    This option will provide a physical screen size for applications which
    wish to remain resolution independent.  
    <replaceable>sizex</replaceable>,<replaceable>sizey</replaceable> are the x,y
    size of the screen in millimeters, unless the optional
    <replaceable>dpi</replaceable>
    string is affixed, in which case, they represent resolution in dots-per-inch.
    </para></listitem>
    </varlistentry>

    <varlistentry>
    <term><option>-pixfmt=<replaceable>format_string</replaceable></option></term>
    <listitem><para>
    This option will provide a non-default pixel format explicitly.  Currently
    the accepted format of <replaceable>format_string</replaceable> is something
    like "r5b5g5p1", which would specify a pixel where the low bit of the 
    pixel is unused padding, followed by 5 bits of green, then 5 bits of blue and 
    finally 5 bits of red, with the remaining high bits, if any, being unused pad.
    A more formal description of this format string will be provided (and more 
    strings accepted) in future LibGGI releases.
    </para></listitem>
    </varlistentry>

    <varlistentry>
    <term><option>-layout=<replaceable>fstride</replaceable>[plb<replaceable>lstride</replaceable>|plan<replaceable>pstride</replaceable>,<replaceable>plstride</replaceable>]</option></term>
    <listitem><para>
    This option will provide a non-default framebuffer layout explicitly.
    The <replaceable>fstride</replaceable> parameter denotes the number of 
    bytes between frames in the framebuffer, and will default to the size of 
    the virtual screen in bytes if nonpresent or set to 0.  Following fstride, 
    the string "plb" denotes a linear packed-pixel framebuffer, or the 
    string "plan" instead denotes a planar framebuffer.  The packed-pixel 
    framebuffer layout is the default.  If the string "plb" is present, 
    a horizontal stride <replaceable>lstride</replaceable>may appear, denoting
    the number of bytes that elapse between the beginning of one line and the
    next.  This will default to the size of a horizontal line in bytes if
    nonpresent or set to zero.  If the string "plan" is present, up to two
    numbers, comma separated, may appear after the string.  The first number,
    <replaceable>pstride</replaceable>denotes the number of bytes which elapse
    between the beginning of one plane and the next.  This will default to
    the minimum integral number of bytes that may contain one bitplane of the 
    virtual screen if nonpresent or set to zero.  The second number, 
    <replaceable>plstride</replaceable>denotes the number of bytes that 
    elapse between the beginning of one bitplane-line and the next.  This will 
    default to the minimum integral number of bytes which may contain one 
    bitplane-line of the virtual screen if nonpresent or set to zero.
    </para>
    <para>
    More strings and format parameters may accepted in future LibGGI releases.
    </para></listitem>
    </varlistentry>

    <varlistentry>
    <term>shmid:<replaceable>sid</replaceable></term>
    <listitem>
    <para>use existing shared memory ID <replaceable>sid</replaceable></para>
    </listitem>
    </varlistentry>

    <varlistentry>
    <term>keyfile:<replaceable>size</replaceable>:<replaceable>id</replaceable>:<replaceable>fname</replaceable></term>
    <listitem><para>
    create a new shm segment with id
    ftok(<replaceable>fname</replaceable>,
    <replaceable>id</replaceable>) of size
    <replaceable>size</replaceable> (preferred method !)
    </para></listitem>
    </varlistentry>

    <varlistentry>
    <term>pointer</term>
    <listitem><para>
    use the memory pointed to by <parameter>argptr</parameter> (only
    available to applications calling <function>ggiOpen</function>).
    </para></listitem>
    </varlistentry>

    </variablelist>
  
<important>
  <para>
    If you specify a memory area to use - be sure it's big enough as no
    checks can or will be made that a certain mode fits into it.
  </para>
</important>

</refsect1>

<refsect1><title>Features</title>

<simplelist>
<member>DirectBuffer support always available.</member>
<member>Unaccelerated.</member>
</simplelist>

</refsect1>

</refentry>
